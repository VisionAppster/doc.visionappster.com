
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>White Balance Correction &mdash; VisionAppster  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/docsearch.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/v.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script defer="defer" src="../../_static/js/docsearch.min.js"></script>
        <script defer="defer" src="../../_static/js/algolia.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="YOLO classifier" href="../yolo-classifier/" />
    <link rel="prev" title="Web app" href="../web-app/" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <div data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search" >
        

        
          <a href="../../">
        

        
          
          <img src="../../_static/visionappster.png" class="logo" alt="Logo">
        
        </a>

        
          
          
        

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <nav class="wy-nav-side-inner">
        <div class="wy-side-scroll">
          
          <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
              
              
                
              
              
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install/">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../engine/">Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../builder/">Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/">Built-in tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/">APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../components/">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cameras/">Cameras</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Cookbook</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../analyze-blob-geometry/">Analyze Blob Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../binarize/">Binarize</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blurring/">Blurring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../caliper/">Caliper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code-reading/">Code reading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contour-matching/">Contour matching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../detect-blobs/">Detect Blobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../image-classifier/">Image classifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual-calibration/">Manual Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../motion-detector/">Motion detector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../opencv-tools/">OpenCv Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python-superresolution/">Super-resolution with OpenCV and Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python-yolov4/">Yolo V4 object detection with OpenCV and Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qr-positioning/">Positioning with QR codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../raspi-code-reading/">Code reading for Raspberry Pi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../texture-matching/">Texture matching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unsharp-masking/">Unsharp Masking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../web-app/">Web app</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">White Balance Correction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#downloads">Downloads</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detailed-description">Detailed description</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../yolo-classifier/">YOLO classifier</a></li>
</ul>
</li>
</ul>

              
            
          </div>
          
        </div>
      </nav>
    </div>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../">VisionAppster</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../">Cookbook</a> &raquo;</li>
        
      <li>White Balance Correction</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="white-balance-correction">
<h1>White Balance Correction<a class="headerlink" href="#white-balance-correction" title="Permalink to this headline">ðŸ”—</a></h1>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">ðŸ”—</a></h2>
<p>Color balance can be adjusted using the set of tools demonstrated in
this cookbook. Let us first take a look at a couple of examples. In the
first example, the upper image has a brownish tone and in the second
example it has a blueish tone in the background. After the white balance
correction, the background is corrected as white.</p>
<ul class="simple">
<li><p>Example 1. Correcting a brownish background.</p></li>
</ul>
<div class="small figure align-default" id="id1">
<img alt="Whitening a brownish background" src="../../_images/white-balance-output-1.png" />
<p class="caption"><span class="caption-text">Whitening a brownish background</span><a class="headerlink" href="#id1" title="Permalink to this image">ðŸ”—</a></p>
</div>
<ul class="simple">
<li><p>Example 2. Correcting a blueish background.</p></li>
</ul>
<div class="small figure align-default" id="id2">
<img alt="Whitening a blueish background" src="../../_images/white-balance-output-2.png" />
<p class="caption"><span class="caption-text">Whitening a blueish background</span><a class="headerlink" href="#id2" title="Permalink to this image">ðŸ”—</a></p>
</div>
</div>
<div class="section" id="downloads">
<h2>Downloads<a class="headerlink" href="#downloads" title="Permalink to this headline">ðŸ”—</a></h2>
<ul class="simple">
<li><p><a class="reference download internal" download="" href="../../_downloads/182d4484fd34a73b91fc28fc411c9554/CookbookWhiteBalance.zip"><code class="xref download docutils literal notranslate"><span class="pre">Project</span> <span class="pre">file</span></code></a></p></li>
</ul>
</div>
<div class="section" id="detailed-description">
<h2>Detailed description<a class="headerlink" href="#detailed-description" title="Permalink to this headline">ðŸ”—</a></h2>
<p>Let us walk through the schema below top-down.</p>
<div class="medium figure align-default" id="id3">
<img alt="Processing graph" src="../../_images/white-balance-1.png" />
<p class="caption"><span class="caption-text">Processing graph</span><a class="headerlink" href="#id3" title="Permalink to this image">ðŸ”—</a></p>
</div>
<ul class="simple">
<li><p>Te test image originates from the virtual camera configured in <a class="reference internal" href="../../tools/ImageSource/"><span class="doc">Image
Source</span></a>.</p></li>
<li><p>The pixel intensities are linearized in <a class="reference internal" href="../../tools/CorrectGammaTool/"><span class="doc">Gamma
Correction</span></a> which has been configured to
<code class="docutils literal notranslate"><span class="pre">Compress</span></code> mode. In this example we assume that the original image
has been corrected with a gamma value 2.2. However, if the image
comes from a file, the most likely value is <code class="docutils literal notranslate"><span class="pre">sRGB</span></code>. It is a special
preset value configured to Gamma Correction tool. <code class="docutils literal notranslate"><span class="pre">sRGB</span></code> is also
the default value. Linearization step is necessary in order to apply
linear color balancing below.</p></li>
<li><p>In this example, our mission is to correct the background color which
is known to be white, but does not look white in the image due to
differences in lighting. A reference area with the known color (in
this case white) is sampled with a <a class="reference internal" href="../../tools/SampleColorsTool/"><span class="doc">Color
Sampling</span></a> tool. The bigger the area, the
better the result will be because more noise can be filtered out. The
location of the area is selected by dragging the <code class="docutils literal notranslate"><span class="pre">Frame</span></code> input on
the image display. In this case, the lower right corner of the image
is selected for color sampling.</p></li>
</ul>
<div class="medium figure align-default" id="id4">
<img alt="Color compression and sampling" src="../../_images/white-balance-2.png" />
<p class="caption"><span class="caption-text">Color compression and sampling</span><a class="headerlink" href="#id4" title="Permalink to this image">ðŸ”—</a></p>
</div>
<ul class="simple">
<li><p>The known reference color is set in <a class="reference internal" href="../../tools/ColorRatioTool/"><span class="doc">Color
Ratio</span></a> tool. In this example, the reference
value on each color channel is 240, so the reference color is nearly
white. The color is given as a hexadecimal value in the order <em>red,
green, blue</em>. So in this case, the hex value is <code class="docutils literal notranslate"><span class="pre">f0f0f0</span></code> (<code class="docutils literal notranslate"><span class="pre">f0</span></code>
hex = 240 decimal). The tool outputs scaling factors for each color
channel.</p></li>
<li><p><a class="reference internal" href="../../tools/BalanceColorsTool/"><span class="doc">Color Balancing</span></a> tool applies the
correction to the input image. In this example, the tool balances the
color channels so that the color measured from the reference area
becomes white on average. The output is a corrected image with linear
colors.</p></li>
<li><p>Gamma expansion is applied to the linearized image with the same
gamma coefficient as was used above in the compression step. The
gamma value 2.2 is the best for contemporary display devices. If you
want to save the image to a file, the best option is to use the
default value :doc:<code class="docutils literal notranslate"><span class="pre">sRGB</span></code>. The mode in <cite>Gamma
Correction &lt;/tools/CorrectGammaTool&gt;</cite> tool is set as <code class="docutils literal notranslate"><span class="pre">Expand</span></code>.</p></li>
</ul>
<div class="medium figure align-default" id="id5">
<img alt="Color correction and expansion" src="../../_images/white-balance-3.png" />
<p class="caption"><span class="caption-text">Color correction and expansion</span><a class="headerlink" href="#id5" title="Permalink to this image">ðŸ”—</a></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../yolo-classifier/" class="btn btn-neutral float-right" title="YOLO classifier" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../web-app/" class="btn btn-neutral float-left" title="Web app" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, VisionAppster.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-129514554-1', 'auto');
    
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>