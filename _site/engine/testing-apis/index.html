
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Testing HTTP APIs &mdash; VisionAppster  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/docsearch.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/v.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script defer="defer" src="../../_static/js/docsearch.min.js"></script>
        <script defer="defer" src="../../_static/js/algolia.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="Web apps" href="../web-apps/" />
    <link rel="prev" title="Starting and stopping the Engine" href="../start-stop/" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <div data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search" >
        

        
          <a href="../../">
        

        
          
          <img src="../../_static/visionappster.png" class="logo" alt="Logo">
        
        </a>

        
          
          
        

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <nav class="wy-nav-side-inner">
        <div class="wy-side-scroll">
          
          <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
              
              
                
              
              
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install/">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Engine</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../#main-elements">Main elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../#supported-platforms">Supported platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apps/">Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../graph-executor/">Graph executor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hardware-devices/">Hardware devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../management-interface/">Management interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../remote-object-system/">Remote object system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services/">VisionAppster Engine services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../start-stop/">Starting and stopping the Engine</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Testing HTTP APIs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#web-based-testing">Web-based testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#actions">Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#command-line-testing">Command-line testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../web-apps/">Web apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../world-coordinates/">World coordinates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../builder/">Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/">Built-in tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/">APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../components/">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cameras/">Cameras</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cookbook/">Cookbook</a></li>
</ul>

              
            
          </div>
          
        </div>
      </nav>
    </div>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../">VisionAppster</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../">Engine</a> &raquo;</li>
        
      <li>Testing HTTP APIs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="testing-http-apis">
<h1>Testing HTTP APIs<a class="headerlink" href="#testing-http-apis" title="Permalink to this headline">🔗</a></h1>
<div class="section" id="web-based-testing">
<h2>Web-based testing<a class="headerlink" href="#web-based-testing" title="Permalink to this headline">🔗</a></h2>
<p>The Engine’s web-based management interface contains an API tester that
can be used to test the public HTTP interface of a running app. It is
currently limited to testing <a class="reference internal" href="../../builder/app-api/#tool-functions"><span class="std std-ref">tool API
functions</span></a> only. The tester lets one
to define the input arguments of a function call and inspect the results
graphically.</p>
<p>Once you have an app running in the Engine, you can browse to the <a class="reference external" href="http://localhost:2015/#apis">APIS
page</a> to see its published API. Clicking
the “Test” button opens an API tester. If you have the Builder running,
its embedded web server provides the same functionality, by default in
<a class="reference external" href="http://localhost:2015/#apis">port 2020</a>.</p>
<div class="figure align-default" id="id1">
<img alt="Clicking the &quot;Test&quot; button opens an API tester." src="../../_images/engine-api-tester-open.png" />
<p class="caption"><span class="caption-text">Clicking the “Test” button opens an API tester.</span><a class="headerlink" href="#id1" title="Permalink to this image">🔗</a></p>
</div>
<p>The tester lists the public API functions as collapsible tabs
(accordion). In this case, the API consists of a single function:
<code class="docutils literal notranslate"><span class="pre">detectObjects</span></code>. Its input parameters are shown in the first content
box and output parameters in the second one. Both are initially empty.</p>
<p>The web page uses different display components for parameters depending
on their data type. In this case, the single input parameter is an image
while the output is an object, which will be displayed as JSON.</p>
<p>The third content box shows how the API can be used from different
programming languages. The code examples are mostly self-contained; if
there are prerequisites, they are explained in comments.</p>
<div class="figure align-default" id="id2">
<img alt="Initially, no input or output parameters are shown." src="../../_images/engine-api-tester-empty.png" />
<p class="caption"><span class="caption-text">Initially, no input or output parameters are shown.</span><a class="headerlink" href="#id2" title="Permalink to this image">🔗</a></p>
</div>
<p>Once a value for each input parameter has been defined, the tester will
call the API function. The system automatically interprets certain types
of output parameters and is capable of providing visual feedback such as
bounding boxes draw on the input image.</p>
<div class="figure align-default" id="id3">
<img alt="The API tester provides visualizations for certain output types." src="../../_images/engine-api-tester-boxes.png" />
<p class="caption"><span class="caption-text">The API tester provides visualizations for certain output types.</span><a class="headerlink" href="#id3" title="Permalink to this image">🔗</a></p>
</div>
</div>
<div class="section" id="actions">
<h2>Actions<a class="headerlink" href="#actions" title="Permalink to this headline">🔗</a></h2>
<p>If you want to run an app in VisionAppster cloud or automatically test
its API for example in a continuous integration server, you need to
craft a JSON document that defines actions for test and/or
demonstration. The “actions.json” tab in the API example box generates
one for you.</p>
<div class="figure align-default" id="id4">
<img alt="The API tester can generate action descriptions." src="../../_images/engine-api-tester-actions.png" />
<p class="caption"><span class="caption-text">The API tester can generate action descriptions.</span><a class="headerlink" href="#id4" title="Permalink to this image">🔗</a></p>
</div>
<p>This document describes how to call the API function with the input
parameters you have currently defined. If you copy the text and save it
to a file called <code class="docutils literal notranslate"><span class="pre">actions.json</span></code>, you have a working action definition.</p>
<p>Multiple actions can be incorporated into the same document by copying
and pasting them to the <code class="docutils literal notranslate"><span class="pre">actions</span></code> array. This is how you add demos to
your cloud app in VisionAppster Store. An example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;componentId&quot;</span><span class="p">:</span> <span class="s2">&quot;com.visionappster.apps.objectdetector/1&quot;</span><span class="p">,</span>
  <span class="nt">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;function&quot;</span><span class="p">:</span> <span class="s2">&quot;detectObjects&quot;</span><span class="p">,</span>
      <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;People and vehicles on a street.&quot;</span><span class="p">,</span>
      <span class="nt">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;crowded_street.jpg&quot;</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;function&quot;</span><span class="p">:</span> <span class="s2">&quot;detectObjects&quot;</span><span class="p">,</span>
      <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Different animals.&quot;</span><span class="p">,</span>
      <span class="nt">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;horses_dogs_and_cats.jpg&quot;</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>VisionAppster Cloud generates demos for your app using <code class="docutils literal notranslate"><span class="pre">actions.json</span></code>.
It also automatically tests and benchmarks your app using the same data.
When uploading a component to VisionAppster Store you should thus try to
make sure your demo data is representative of actual data used in
production. Otherwise, you may get misleading performance metrics.</p>
<p>In addition to <code class="docutils literal notranslate"><span class="pre">actions.json</span></code> the cloud service needs the input data.
You need to combine these into a single file called <code class="docutils literal notranslate"><span class="pre">actions.zip</span></code> so
that relative paths to images (and possibly other input data) are
correct. A correctly formatted zip file in the example above could be
created from the following directory structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myactions</span><span class="o">/</span>
<span class="n">myactions</span><span class="o">/</span><span class="n">actions</span><span class="o">.</span><span class="n">json</span>
<span class="n">myactions</span><span class="o">/</span><span class="n">crowded_street</span><span class="o">.</span><span class="n">jpg</span>
<span class="n">myactions</span><span class="o">/</span><span class="n">horses_dogs_and_cats</span><span class="o">.</span><span class="n">jpg</span>
</pre></div>
</div>
<p>To create an <code class="docutils literal notranslate"><span class="pre">actions.zip</span></code> for the cloud service, you would do this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> myactions
zip actions.zip *
</pre></div>
</div>
<p>That is, put everything in the root directory of the zip file.</p>
</div>
<div class="section" id="command-line-testing">
<h2>Command-line testing<a class="headerlink" href="#command-line-testing" title="Permalink to this headline">🔗</a></h2>
<p>To use the command-line testing tool you need to <a class="reference external" href="https://nodejs.org/en/download/">Install
Node.js</a> first. Then, you can use
the Node.js package manager to install the testing tool:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo npm install -g va-api-tester
<span class="c1"># sudo is not needed on Windows</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">va-api-tester</span></code> is a stand-alone tool that does not require an
existing VisionAppster installation. You can connect it to any running
VisionAppster Engine instance or let it run a self-contained <a class="reference external" href="https://hub.docker.com/r/visionappster/va-engine">Docker
image</a> for you.
Once installed, a complete list of options is given by:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>va-api-tester --help
</pre></div>
</div>
<p>As an input, the tester needs an <code class="docutils literal notranslate"><span class="pre">actions.json</span></code> file (<a class="reference external" href="#actions">see
above</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>va-api-tester --run actions.json --benchmark
</pre></div>
</div>
<p>This will use the input parameters defined in <code class="docutils literal notranslate"><span class="pre">actions.json</span></code> to call
the listed API functions multiple times to estimate their end-to-end
execution times. Note that referenced input files (images) need to be
available in the same directory as <code class="docutils literal notranslate"><span class="pre">actions.json</span></code>. Alternatively, you
can pass <code class="docutils literal notranslate"><span class="pre">--data-root</span></code> as a command-line argument. As an output,
you’ll get a JSON document by default. XML output (xUnit) is also
supported.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--coverage</span></code> option can be used to verify that your API meets
VisionAppster Cloud requirements:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>va-api-tester --run actions.json --coverage
</pre></div>
</div>
<p>In the third operation mode, <code class="docutils literal notranslate"><span class="pre">--save</span></code>, the tester goes through all
actions and calls the corresponding API function once. It stores the
input and output parameters of the call into <code class="docutils literal notranslate"><span class="pre">.vabin</span></code> files that can
be used to demonstrate the API without actually running the app:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>va-api-tester --run actions.json --save
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">actions.json</span></code> contains the two actions shown above, this will save
two files: <code class="docutils literal notranslate"><span class="pre">00.vabin</span></code> and <code class="docutils literal notranslate"><span class="pre">01.vabin</span></code>. These files can be uploaded to
the API tester web UI using the “Click to upload or drop .vabin files
here.” control at the bottom of the page.</p>
<p>VisionAppster Cloud executes the exact same steps to generate demos for
your cloud apps. To make sure your demos look exactly what you expect
you should run tester locally first and see the result.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../web-apps/" class="btn btn-neutral float-right" title="Web apps" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../start-stop/" class="btn btn-neutral float-left" title="Starting and stopping the Engine" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, VisionAppster.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-129514554-1', 'auto');
    
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>