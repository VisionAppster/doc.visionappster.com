
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Linux installation &mdash; VisionAppster  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/docsearch.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/v.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script defer="defer" src="../../_static/js/docsearch.min.js"></script>
        <script defer="defer" src="../../_static/js/algolia.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="Raspberry Pi installation" href="../raspberrypi/" />
    <link rel="prev" title="Installation" href="../" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <div data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search" >
        

        
          <a href="../../">
        

        
          
          <img src="../../_static/visionappster.png" class="logo" alt="Logo">
        
        </a>

        
          
          
        

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <nav class="wy-nav-side-inner">
        <div class="wy-side-scroll">
          
          <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
              
              
                
              
              
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../">Installation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../#instructions">Instructions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Linux installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#desktop-flatpak">Desktop (Flatpak)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#embedded-tarball">Embedded (tarball)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#how-does-it-work">How does it work?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#differences-to-docker">Differences to Docker</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../raspberrypi/">Raspberry Pi installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../windows/">Windows installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../engine/">Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../builder/">Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/">Built-in tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/">APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../components/">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cameras/">Cameras</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cookbook/">Cookbook</a></li>
</ul>

              
            
          </div>
          
        </div>
      </nav>
    </div>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../">VisionAppster</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../">Installation</a> &raquo;</li>
        
      <li>Linux installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="linux-installation">
<h1>Linux installation<a class="headerlink" href="#linux-installation" title="Permalink to this headline">ðŸ”—</a></h1>
<p>The Linux installer comes in two flavors: a Flatpak-based desktop
installer that contains both the Builder, the SDK and the Engine and a
tarball that contains just the Engine. If you are installing
VisionAppster on a desktop PC for development purposes, youâ€™ll need the
desktop installer (Flatpak). If you only need the Engine (and do not
want Docker) or are installing it on an embedded device, pick the
tarball.</p>
<div class="section" id="desktop-flatpak">
<h2>Desktop (Flatpak)<a class="headerlink" href="#desktop-flatpak" title="Permalink to this headline">ðŸ”—</a></h2>
<p>Open a terminal and run the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget https://download.visionappster.com/linux/va-install
chmod +x va-install
./va-install
</pre></div>
</div>
<p>The VisionAppster platform will be installed to your home directory
(user scope) by default.</p>
<p>The desktop installer uses Flatpak to cover as many Linux distributions
as possible. The <code class="docutils literal notranslate"><span class="pre">va-install</span></code> script will inspect your system and try
to install a recent enough Flatpak if needed. We havenâ€™t tested all
Linux distributions though. If the installer fails, please check <a class="reference external" href="https://flatpak.org/setup/">the
official Flatpak site</a> for
distro-specific installation instructions.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">va-install</span></code> script can later be used as a maintenance tool. You
may want to copy it to your <code class="docutils literal notranslate"><span class="pre">PATH</span></code> to ease future maintenance tasks.
In the terminal, give the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo cp va-install /usr/bin
</pre></div>
</div>
<p>Once this is done, you can update your local or system-level
installation by just entering <code class="docutils literal notranslate"><span class="pre">va-install</span></code> or <code class="docutils literal notranslate"><span class="pre">va-install</span> <span class="pre">--system</span></code>
on the command line. Type <code class="docutils literal notranslate"><span class="pre">va-install</span> <span class="pre">--help</span></code> for usage instructions.</p>
<p>The installer will add desktop entries that will appear somewhere in
your start menu/launcher depending on your desktop environment. There is
a known caching issue in some KDE versions that prevents you from seeing
the new entries unless you log out and in again. You can however always
start the Builder from the command line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># User-scope installation, if ~/bin or ~/.local/bin is in PATH</span>
va-builder

<span class="c1"># Otherwise</span>
flatpak run com.visionappster.Builder
</pre></div>
</div>
<p>The installer lets you to optionally install the VisionAppster Engine as
a systemd service. To start and stop the service:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># User scope installation</span>
systemctl start --user va-engine
systemctl stop --user va-engine

<span class="c1"># System scope installation</span>
sudo systemctl start va-engine
sudo systemctl stop va-engine
</pre></div>
</div>
</div>
<div class="section" id="embedded-tarball">
<h2>Embedded (tarball)<a class="headerlink" href="#embedded-tarball" title="Permalink to this headline">ðŸ”—</a></h2>
<p>The tarball installer contains the VisionAppster Engine and all of its
dependencies. This makes it possible to run the Engine on practically
any Linux distribution provided that the underlying hardware meets the
<a class="reference internal" href="../../components/cross-compilation/#hardware-profiles-and-optimization"><span class="std std-ref">requirements</span></a>.</p>
<p>To install the tarball, type the following commands in a terminal. You
may need to make some adaptations; for example, the <code class="docutils literal notranslate"><span class="pre">sudo</span></code> command may
not be available. In such a case run the commands as root.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Change as needed. Supported architectures are x86_64, arm_64 and arm_32</span>
<span class="nv">ARCH</span><span class="o">=</span>x86_64
wget https://download.visionappster.com/linux/<span class="nv">$ARCH</span>/va-engine-linux-<span class="nv">$ARCH</span>-latest.tgz
sudo tar zxfC va-engine-linux-<span class="nv">$ARCH</span>-latest.tgz /
<span class="nb">cd</span> /va-engine/overlay/opt/visionappster/bin
sudo chown root:root va-chroot
sudo chmod +s va-chroot
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PATH</span><span class="s2">:/va-engine/overlay/bin&quot;</span>
</pre></div>
</div>
<p>Test the installation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>va-pkg --help
</pre></div>
</div>
<p>To install the VisionAppster Engine as a systemd service:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo ln -s /va-engine/overlay/usr/lib/systemd/system/va-engine.service /usr/lib/systemd/system
sudo systemctl <span class="nb">enable</span> va-engine
</pre></div>
</div>
<p>Inspect the <code class="docutils literal notranslate"><span class="pre">va-engine.service</span></code> file to see how to start the service
manually.</p>
<div class="section" id="how-does-it-work">
<h3>How does it work?<a class="headerlink" href="#how-does-it-work" title="Permalink to this headline">ðŸ”—</a></h3>
<p>The tarball contains everything the VisionAppster Engine requires,
including the standard C library (<code class="docutils literal notranslate"><span class="pre">glibc</span></code>) and the dynamic loader
(<code class="docutils literal notranslate"><span class="pre">ld-linux.so</span></code>). It depends on nothing but the Linux kernel, which has
a very stable interface. If you compile the kernel yourself, make sure
to enable overlayfs support.</p>
<p>Binaries in the tarball are started through <code class="docutils literal notranslate"><span class="pre">va-chroot</span></code>, a statically
linked executable that sets up a chrooted sandbox for a command to run.
This separates the command from the surrounding system so that no
conflicting shared libraries will be loaded.</p>
<p><code class="docutils literal notranslate"><span class="pre">va-chroot</span></code> works broadly the same way as the standard
<a class="reference external" href="https://linux.die.net/man/1/chroot">chroot</a> command, but instead of
just using an existing directory as the file system root it creates a
merged file system (overlayfs) by mounting the tarballâ€™s contents on top
of the systemâ€™s root directory (in a private namespace) and chroots the
process there. This requires root privileges, which is why we set the
suid bit (<code class="docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">+s</span></code>) in the instructions above. <code class="docutils literal notranslate"><span class="pre">va-chroot</span></code> will
drop root privileges once it has done the mounts.</p>
<p>The systemâ€™s root directory will be mounted in read-only mode, which
means the VisionAppster Engine will not be able to make changes to it.
Instead, the changes will appear under <code class="docutils literal notranslate"><span class="pre">/va-engine/overlay/</span></code> when
viewed from the host system. (This directory is not accessible in the
sandbox.)</p>
<p>You can use <code class="docutils literal notranslate"><span class="pre">va-chroot</span></code> either through symbolic links or by invoking
the command directly. By default, the <code class="docutils literal notranslate"><span class="pre">va-pkg</span></code> and <code class="docutils literal notranslate"><span class="pre">va-run</span></code> commands
are symlinked to <code class="docutils literal notranslate"><span class="pre">/va-engine/overlay/bin</span></code>, which is why we added that
directory to <code class="docutils literal notranslate"><span class="pre">PATH</span></code> above. If you want to use other commands through
<code class="docutils literal notranslate"><span class="pre">va-chroot</span></code>, its help provides further details:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/va-engine/overlay/opt/visionappster/bin/va-chroot --help
</pre></div>
</div>
<p>Note that if you run dynamically linked binaries in the sandbox, they
must be compatible with the shared libraries and the dynamic loader that
are shipped in the tarball. Existing binaries in your system may or may
not work. For example, the following either lists the contents of the
merged file systemâ€™s root or fails with a dynamic linker error message:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/va-engine/overlay/opt/visionappster/bin/va-chroot /bin/ls /
</pre></div>
</div>
</div>
<div class="section" id="differences-to-docker">
<h3>Differences to Docker<a class="headerlink" href="#differences-to-docker" title="Permalink to this headline">ðŸ”—</a></h3>
<p>The <a class="reference external" href="https://hub.docker.com/r/visionappster/va-engine">VisionAppster Engine Docker
image</a> contains the
same binary files as the tarball. The file system in the Docker image is
however strictly separated from the host system, which means that the
image must be more self-contained. It basically comes with a small Linux
distribution wrapped around the tarball, which obviously makes it
bigger. To run the image you also need to have the Docker runtime
installed. These reasons, and the more restricted access to the
underlying system make the Docker image less suitable for embedded
devices. Dockerâ€™s management interface however makes it a good choice
e.g.Â in cloud deployments.</p>
<p>On the other hand, the tarball is not fully self-contained in the sense
that it directly uses the host systemâ€™s devices, network configuration
etc. Apart from the Linux kernel it requires no external binaries to
function, which makes it ideal for custom-built embedded systems. It is
also a good choice on bare-metal server deployments (e.g.Â Linux PCs)
that are managed via systemd.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../raspberrypi/" class="btn btn-neutral float-right" title="Raspberry Pi installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, VisionAppster.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-129514554-1', 'auto');
    
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>