
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Creating components &mdash; VisionAppster  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/docsearch.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/v.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script defer="defer" src="../../_static/js/docsearch.min.js"></script>
        <script defer="defer" src="../../_static/js/algolia.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="Built-in tools" href="../../tools/" />
    <link rel="prev" title="Compound tools" href="../compounds/" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <div data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search" >
        

        
          <a href="../../">
        

        
          
          <img src="../../_static/visionappster.png" class="logo" alt="Logo">
        
        </a>

        
          
          
        

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <nav class="wy-nav-side-inner">
        <div class="wy-side-scroll">
          
          <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
              
              
                
              
              
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install/">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../engine/">Engine</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Builder</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../#first-steps">First steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-api/">App API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compounds/">Compound tools</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Creating components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#packaging-apps">Packaging apps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#packaging-tool-plugins">Packaging tool plugins</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/">Built-in tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/">APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../components/">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cameras/">Cameras</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cookbook/">Cookbook</a></li>
</ul>

              
            
          </div>
          
        </div>
      </nav>
    </div>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../">VisionAppster</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../">Builder</a> &raquo;</li>
        
      <li>Creating components</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="creating-components">
<h1>Creating components<a class="headerlink" href="#creating-components" title="Permalink to this headline">🔗</a></h1>
<p>To be able to distribute your apps through the <a class="reference external" href="https://visionappster.com">VisionAppster
Store</a> or install them to the
<a class="reference internal" href="../../engine/"><span class="doc">Engine</span></a>, you need to create a
<a class="reference internal" href="../../components/"><span class="doc">component</span></a> and store it in a <a class="reference internal" href="../../components/packages/"><span class="doc">component
package</span></a>.</p>
<p>The component package is a zip file with a known directory structure.
Each component in the package is described by a <code class="docutils literal notranslate"><span class="pre">component.json</span></code> file.
The Builder provides a user interface for creating a component package
out of the current app directly. If you want to create other types of
components, you need to create the directory structure manually and then
use the Builder or <a class="reference internal" href="../../components/building/"><span class="doc">a command-line tool</span></a> to
compile the package file.</p>
<div class="section" id="packaging-apps">
<h2>Packaging apps<a class="headerlink" href="#packaging-apps" title="Permalink to this headline">🔗</a></h2>
<p>We’ll use the <a class="reference internal" href="../"><span class="doc">edge detector app</span></a> as an example. The
target is to create an app can be triggered to process a file on the
local hard drive through an HTTP request. The app will send the
processing results as signals.</p>
<p>Click File, Open… and choose the directory you saved the project into.
The Builder will show you the platform’s file dialog, the picture below
shows a Qt dialog in Linux.</p>
<div class="large figure align-default" id="id1">
<img alt="Choose the directory of the project to open it." src="../../_images/components-open-project.png" />
<p class="caption"><span class="caption-text">Choose the directory of the project to open it.</span><a class="headerlink" href="#id1" title="Permalink to this image">🔗</a></p>
</div>
<p>As a first step, we’ll give our app a component ID. The component ID
will uniquely identify the app and its API. Select File, App
properties… and change the auto-generated component ID to
“com.example.edgedetector”. If your intent is to sell or otherwise
distribute the app through the Store, you need to register the component
ID using your seller account.</p>
<div class="large figure align-default" id="id2">
<img alt="Give the app a unique component ID." src="../../_images/components-app-id.png" />
<p class="caption"><span class="caption-text">Give the app a unique component ID.</span><a class="headerlink" href="#id2" title="Permalink to this image">🔗</a></p>
</div>
<p>The virtual camera the app was set up with reads images from your hard
drive, which will not be accessible by the users of the app. The next
step is to change this so that the name of the image file will come
through an API call. Change the <code class="docutils literal notranslate"><span class="pre">Camera</span> <span class="pre">Id</span></code> parameter to “File name
trigger”.</p>
<p>Note that this will cause the processing graph to stop because there is
no longer a camera from which images could be read. You can dismiss the
error message by clicking “Restart now”.</p>
<div class="small figure align-default" id="id3">
<img alt="&quot;File name trigger&quot; makes the image source to treat trigger inputs as file names." src="../../_images/components-file-name-trigger.png" />
<p class="caption"><span class="caption-text">“File name trigger” makes the image source to treat trigger inputs as
file names.</span><a class="headerlink" href="#id3" title="Permalink to this image">🔗</a></p>
</div>
<p>In the context menu of the <code class="docutils literal notranslate"><span class="pre">Trigger</span></code> input, select “Publish app API
function” to add the input to the API object as a function.</p>
<div class="small figure align-default" id="id4">
<img alt="Any connectable input can be turned into an API function." src="../../_images/components-publish-api-function.png" />
<p class="caption"><span class="caption-text">Any connectable input can be turned into an API function.</span><a class="headerlink" href="#id4" title="Permalink to this image">🔗</a></p>
</div>
<p>Open the API editor to see the app’s API. You’ll see three entries: one
function and two signals. Since we dragged two output parameters to an
image display, the Builder has automatically created two signals for us.
The trigger input will show up as a function.</p>
<div class="large figure align-default" id="id5">
<img alt="The API editor shows the public API of your app." src="../../_images/components-api-editor.png" />
<p class="caption"><span class="caption-text">The API editor shows the public API of your app.</span><a class="headerlink" href="#id5" title="Permalink to this image">🔗</a></p>
</div>
<p>The default names of the API entries are composed of the parameter name
and an optional postfix number to make the name unique in the
application scope. Since the API is intended to be used as the public
interface of your app, try to find descriptive names. Click the name of
the API entry (the rightmost column) to rename it.</p>
<p>We’ll change the default names to <code class="docutils literal notranslate"><span class="pre">sendFileName</span></code>, <code class="docutils literal notranslate"><span class="pre">sourceImage</span></code> and
<code class="docutils literal notranslate"><span class="pre">edges</span></code> as shown in the next picture. By convention, the names should
be in camelCase, i.e. start with a lowercase letter and capitalize the
first letter of subsequent words.</p>
<div class="small figure align-default" id="id6">
<img alt="Make the names of API entries descriptive." src="../../_images/components-rename-api.png" />
<p class="caption"><span class="caption-text">Make the names of API entries descriptive.</span><a class="headerlink" href="#id6" title="Permalink to this image">🔗</a></p>
</div>
<p>Close the API editor by clicking the API icon again and save it with
<em>Ctrl + s</em>. Select File, Package this app… You’ll be shown a component
editor dialog. Open the “Local” section and pick a target folder. Then
click “Create”.</p>
<div class="large figure align-default" id="id7">
<img alt="Creating a component out of an app is straightforward." src="../../_images/components-create-app-package.png" />
<p class="caption"><span class="caption-text">Creating a component out of an app is straightforward.</span><a class="headerlink" href="#id7" title="Permalink to this image">🔗</a></p>
</div>
<p>If you used the default target folder, opening the <a class="reference internal" href="../../engine/management-interface/"><span class="doc">web-based management
interface</span></a> in a browser
(<a class="reference external" href="http://localhost:2020/">http://localhost:2020/</a> by default) will show your component package in
uploaded packages. Alternatively, you can upload the package to a
running remote engine instance directly on the “Remote” section of the
dialog.</p>
</div>
<div class="section" id="packaging-tool-plugins">
<h2>Packaging tool plugins<a class="headerlink" href="#packaging-tool-plugins" title="Permalink to this headline">🔗</a></h2>
<p>The Builder provides no GUI for creating the file system structure for
components other than apps. But fear not, creating other types of
components is still simple.</p>
<p>The VisionAppster SDK comes with a ready-to-build tool plugin that wraps
some OpenCV functions. As a prerequisite, you should build that plugin
as instructed <a class="reference internal" href="../../api/cpp/opencv/"><span class="doc">here</span></a>.</p>
<p>The build process will create <code class="docutils literal notranslate"><span class="pre">myopencv.toolplugin</span></code> in
<code class="docutils literal notranslate"><span class="pre">sdk/examles/opencv/build</span></code>. To make the plugin library a component,
you need to create a specially named directory and put the file there.</p>
<ul>
<li><p>Windows</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">md</span> <span class="n">myopencv</span><span class="o">-</span><span class="mi">1</span>\<span class="n">windows</span><span class="o">-</span><span class="n">x86_64</span>
<span class="n">copy</span> <span class="n">sdk</span>\<span class="n">examples</span>\<span class="n">opencv</span>\<span class="n">build</span>\<span class="n">myopencv</span><span class="o">.</span><span class="n">toolplugin</span> <span class="n">myopencv</span><span class="o">-</span><span class="mi">1</span>\<span class="n">windows</span><span class="o">-</span><span class="n">x86_64</span>
</pre></div>
</div>
</li>
<li><p>Linux</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir -p myopencv-1/linux-x86_64
cp sdk/examples/opencv/build/myopencv.toolplugin myopencv-1/linux-x86_64
</pre></div>
</div>
</li>
</ul>
<p>Tool plugins must have file extension <code class="docutils literal notranslate"><span class="pre">.toolplugin</span></code>. When a component
package is created, files with that extension are marked as
<code class="docutils literal notranslate"><span class="pre">toolplugin</span></code> in the package manifest file and thus installed in the
tool plugin directory.</p>
<p>The examples are configured to build the plugin libraries with that
extension, so there is no need to manually change it prior to the
package creation.</p>
<p>When building component packages, directory names mostly don’t matter.
Binary plugins must however be compiled for each supported target
architecture separately and put under paths that include one of the
known architecture identifiers. This lets the package builder
automatically detect the target architecture. For more details, see the
<a class="reference internal" href="../../components/cross-compilation/"><span class="doc">cross-compilation instructions</span></a>.</p>
<p>Here is an example of the source folder contents for a package with a
plugin binary for two different architectures:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">myopencv</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="n">windows</span><span class="o">-</span><span class="n">x86_64</span><span class="o">/</span><span class="n">myopencv</span><span class="o">.</span><span class="n">toolplugin</span>
<span class="o">/</span><span class="n">myopencv</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="n">linux</span><span class="o">-</span><span class="n">x86_64</span><span class="o">/</span><span class="n">myopencv</span><span class="o">.</span><span class="n">toolplugin</span>
</pre></div>
</div>
<p>When a package like this is installed, the installer will only copy the
files matching the architecture of the running machine.</p>
<p>The final step is to create a component package in the builder. Click
File, Package a folder… Select the <code class="docutils literal notranslate"><span class="pre">myopencv-1</span></code> directory.</p>
<div class="large figure align-default" id="id8">
<img alt="Once you have the files, you just need to fill in component ID and version." src="../../_images/components-create-opencv-package.png" />
<p class="caption"><span class="caption-text">Once you have the files, you just need to fill in component ID and
version.</span><a class="headerlink" href="#id8" title="Permalink to this image">🔗</a></p>
</div>
<p>Make sure to enter the correct component ID (<code class="docutils literal notranslate"><span class="pre">com.example.opencv</span></code>) and
version number (<code class="docutils literal notranslate"><span class="pre">1.0.0</span></code>). Then pick a target directory in the “Local”
section and click “Create”. Done.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../../tools/" class="btn btn-neutral float-right" title="Built-in tools" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../compounds/" class="btn btn-neutral float-left" title="Compound tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, VisionAppster.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-129514554-1', 'auto');
    
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>