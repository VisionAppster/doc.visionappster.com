
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>OpenCvMat &mdash; VisionAppster  documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/docsearch.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../../_static/v.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script defer="defer" src="../../../../_static/js/docsearch.min.js"></script>
        <script defer="defer" src="../../../../_static/js/algolia.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex/" />
    <link rel="search" title="Search" href="../../../../search/" />
    <link rel="next" title="JavaScript client API" href="../../../js/" />
    <link rel="prev" title="OpenCV Integration" href="../" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <div data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search" >
        

        
          <a href="../../../../">
        

        
          
          <img src="../../../../_static/visionappster.png" class="logo" alt="Logo">
        
        </a>

        
          
          
        

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <nav class="wy-nav-side-inner">
        <div class="wy-side-scroll">
          
          <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
              
              
                
              
              
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../install/">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../engine/">Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../builder/">Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/">Built-in tools</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../">APIs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../#data-types">Data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../remoteio/">Remote I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tool/">Tool APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../c/">C API</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../">C++ API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../dlib/">Dlib Integration</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../">OpenCV Integration</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../#example">Example</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">OpenCvMat</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../js/">JavaScript client API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../python/">Python API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../components/">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cameras/">Cameras</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cookbook/">Cookbook</a></li>
</ul>

              
            
          </div>
          
        </div>
      </nav>
    </div>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../">VisionAppster</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../">APIs</a> &raquo;</li>
        
          <li><a href="../../">C++ API</a> &raquo;</li>
        
          <li><a href="../">OpenCV Integration</a> &raquo;</li>
        
      <li>OpenCvMat</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="opencvmat">
<h1>OpenCvMat<a class="headerlink" href="#opencvmat" title="Permalink to this headline">ðŸ”—</a></h1>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;OpenCvMat.h&gt;</span><span class="cp"></span>
</pre></div>
</div>
<dl class="cpp class">
<dt id="_CPPv4N13VisionAppster9OpenCvMatE">
<span id="_CPPv3N13VisionAppster9OpenCvMatE"></span><span id="_CPPv2N13VisionAppster9OpenCvMatE"></span><span id="VisionAppster::OpenCvMat"></span><span class="target" id="VisionAppster::OpenCvMat"></span><em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><a class="reference internal" href="../../dlib/DlibImage/#_CPPv413VisionAppster" title="VisionAppster"><span class="pre">VisionAppster</span></a><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">OpenCvMat</span></code> <span class="pre">:</span> <em class="property"><span class="pre">public</span></em> <span class="pre">cv</span><span class="pre">::</span><span class="pre">Mat</span><a class="headerlink" href="#_CPPv4N13VisionAppster9OpenCvMatE" title="Permalink to this definition">ðŸ”—</a><br /></dt>
<dd><p>A class that wraps a va_image or a va_matrix to an OpenCV matrix (cv::Mat) so that the C types are usable in OpenCV calls. </p>
<p>This is a non-copyable class that is intended to be used as a temporary wrapper in function calls.</p>
<p>Due to the lack of a standard ABI for C++, the implementation of this class cannot be used from a precompiled library but must be compiled into the calling code. To use the class you must thus add OpenCvMat.cc into your projectâ€™s source files.</p>
<p><p>Examples:</p>
<dl class="simple">
<dt><strong>Note</strong></dt><dd><p>OpenCVâ€™s cv::Mat class does not implement the copy-on-write paradigm that is the standard convention on reference-counted objects elsewhere. Therefore, the contents of a wrapped image or a matrix may be modified if the called function modifies the data, even though the image or matrix was originally passed as a const pointer. To make things worse, OpenCV function declarations donâ€™t use <code class="docutils literal notranslate"><span class="pre">const</span></code> to distinguish between input and output data, and the documentation isnâ€™t always clear on this either. There is no efficient way around this deficiency, so be careful. Make a deep copy of the va_image or va_matrix if unsure.</p>
</dd>
</dl>
</p>
<p><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">using</span> <span class="n">VisionAppster</span><span class="p">::</span><span class="n">OpenCvMat</span><span class="p">;</span>

<span class="n">void</span> <span class="n">gaussianBlur</span><span class="p">(</span><span class="n">const</span> <span class="n">va_image</span><span class="o">*</span> <span class="nb">input</span><span class="p">,</span>
                  <span class="nb">int</span> <span class="n">filterSize</span><span class="p">,</span>
                  <span class="n">va_image</span><span class="o">*</span> <span class="n">output</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">filterSize</span> <span class="o">|=</span> <span class="mi">1</span><span class="p">;</span> <span class="o">//</span> <span class="n">Make</span> <span class="n">odd</span>
  <span class="n">cv</span><span class="p">::</span><span class="n">GaussianBlur</span><span class="p">(</span>
    <span class="n">OpenCvMat</span><span class="p">(</span><span class="nb">input</span><span class="p">),</span>
    <span class="n">OpenCvMat</span><span class="p">(</span><span class="n">output</span><span class="p">),</span>
    <span class="n">cv</span><span class="p">::</span><span class="n">Size</span><span class="p">(</span><span class="n">filterSize</span><span class="p">,</span> <span class="n">filterSize</span><span class="p">),</span>
    <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">filter2d</span><span class="p">(</span><span class="n">const</span> <span class="n">va_image</span><span class="o">*</span> <span class="nb">input</span><span class="p">,</span>
              <span class="n">const</span> <span class="n">va_dmatrix</span><span class="o">*</span> <span class="n">kernel</span><span class="p">,</span>
              <span class="n">va_image</span><span class="o">*</span> <span class="n">output</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">cv</span><span class="p">::</span><span class="n">filter2D</span><span class="p">(</span>
    <span class="n">OpenCvMat</span><span class="p">(</span><span class="nb">input</span><span class="p">),</span>
    <span class="n">OpenCvMat</span><span class="p">(</span><span class="n">output</span><span class="p">),</span>
    <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">//</span> <span class="n">Default</span> <span class="n">color</span> <span class="n">channel</span> <span class="n">depth</span>
    <span class="n">OpenCvMat</span><span class="p">(</span><span class="n">kernel</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp enum">
<dt id="_CPPv4N13VisionAppster9OpenCvMat9ColorTypeE">
<span id="_CPPv3N13VisionAppster9OpenCvMat9ColorTypeE"></span><span id="_CPPv2N13VisionAppster9OpenCvMat9ColorTypeE"></span><span class="target" id="ColorType"></span><em class="property"><span class="pre">enum</span> </em><code class="sig-name descname"><span class="pre">ColorType</span></code><a class="headerlink" href="#_CPPv4N13VisionAppster9OpenCvMat9ColorTypeE" title="Permalink to this definition">ðŸ”—</a><br /></dt>
<dd><p>OpenCV color types to which automatic conversions from va_image are supported. </p>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt id="_CPPv4N13VisionAppster9OpenCvMat9ColorType4GrayE">
<span id="_CPPv3N13VisionAppster9OpenCvMat9ColorType4GrayE"></span><span id="_CPPv2N13VisionAppster9OpenCvMat9ColorType4GrayE"></span><span class="target" id="ColorType::Gray"></span><em class="property"><span class="pre">enumerator</span> </em><code class="sig-name descname"><span class="pre">Gray</span></code><a class="headerlink" href="#_CPPv4N13VisionAppster9OpenCvMat9ColorType4GrayE" title="Permalink to this definition">ðŸ”—</a><br /></dt>
<dd><p>Any one-channel (gray level) color type. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N13VisionAppster9OpenCvMat9ColorType5Rgb24E">
<span id="_CPPv3N13VisionAppster9OpenCvMat9ColorType5Rgb24E"></span><span id="_CPPv2N13VisionAppster9OpenCvMat9ColorType5Rgb24E"></span><span class="target" id="ColorType::Rgb24"></span><em class="property"><span class="pre">enumerator</span> </em><code class="sig-name descname"><span class="pre">Rgb24</span></code><a class="headerlink" href="#_CPPv4N13VisionAppster9OpenCvMat9ColorType5Rgb24E" title="Permalink to this definition">ðŸ”—</a><br /></dt>
<dd><p>24-bit RGB color type (BGR). </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N13VisionAppster9OpenCvMat9ColorType5Rgb32E">
<span id="_CPPv3N13VisionAppster9OpenCvMat9ColorType5Rgb32E"></span><span id="_CPPv2N13VisionAppster9OpenCvMat9ColorType5Rgb32E"></span><span class="target" id="ColorType::Rgb32"></span><em class="property"><span class="pre">enumerator</span> </em><code class="sig-name descname"><span class="pre">Rgb32</span></code><a class="headerlink" href="#_CPPv4N13VisionAppster9OpenCvMat9ColorType5Rgb32E" title="Permalink to this definition">ðŸ”—</a><br /></dt>
<dd><p>32-bit RGB color type (BGRA). </p>
</dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4I0EN13VisionAppster9OpenCvMat9OpenCvMatEPK1T">
<span id="_CPPv3I0EN13VisionAppster9OpenCvMat9OpenCvMatEPK1T"></span><span id="_CPPv2I0EN13VisionAppster9OpenCvMat9OpenCvMatEPK1T"></span><span class="pre">template&lt;</span><span class="pre">class</span> <code class="sig-name descname"><span class="pre">T</span></code><span class="pre">&gt;</span><br /><span class="target" id="VisionAppster.OpenCvMat.OpenCvMat"></span><em class="property"><span class="pre">inline</span></em> <code class="sig-name descname"><span class="pre">OpenCvMat</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <a class="reference internal" href="#_CPPv4I0EN13VisionAppster9OpenCvMat9OpenCvMatEPK1T" title="VisionAppster::OpenCvMat::OpenCvMat::T"><span class="pre">T</span></a> <span class="pre">*</span><em><span class="pre">matOrImg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I0EN13VisionAppster9OpenCvMat9OpenCvMatEPK1T" title="Permalink to this definition">ðŸ”—</a><br /></dt>
<dd><p>Constructs a cv::Mat that contains a reference to the data in <em>matOrImg</em>, which may be either a va_image or any va_matrix type. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N13VisionAppster9OpenCvMat9OpenCvMatEPK8va_image9ColorType">
<span id="_CPPv3N13VisionAppster9OpenCvMat9OpenCvMatEPK8va_image9ColorType"></span><span id="_CPPv2N13VisionAppster9OpenCvMat9OpenCvMatEPK8va_image9ColorType"></span><span id="VisionAppster::OpenCvMat::OpenCvMat__va_imageCP.ColorType"></span><span class="target" id="VisionAppster.OpenCvMat.OpenCvMat"></span><code class="sig-name descname"><span class="pre">OpenCvMat</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <a class="reference internal" href="../../../c/reference/va_image/#_CPPv48va_image" title="va_image"><span class="pre">va_image</span></a> <span class="pre">*</span><em><span class="pre">img</span></em>, <a class="reference internal" href="#_CPPv4N13VisionAppster9OpenCvMat9ColorTypeE" title="VisionAppster::OpenCvMat::ColorType"><span class="pre">ColorType</span></a> <em><span class="pre">colorType</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N13VisionAppster9OpenCvMat9OpenCvMatEPK8va_image9ColorType" title="Permalink to this definition">ðŸ”—</a><br /></dt>
<dd><p>Creates a cv::Mat with the specified color type. </p>
<p>If the number of color channels in <em>img</em> is not the same as in <em>colorType</em>, a deep copy of the data in <em>img</em> will be created.</p>
<p>Some (but not all) OpenCV functions assume that the input image has three channels instead of four and throw an error if a four-channel image is used. This is unfortunate as it places the responsibility of choosing the correct number of channels to the caller. This constructor can be used in such situations. It can also automatically convert a gray-level image to RGB and vice versa. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N13VisionAppster9OpenCvMat9OpenCvMatEP8va_image9ColorType">
<span id="_CPPv3N13VisionAppster9OpenCvMat9OpenCvMatEP8va_image9ColorType"></span><span id="_CPPv2N13VisionAppster9OpenCvMat9OpenCvMatEP8va_image9ColorType"></span><span id="VisionAppster::OpenCvMat::OpenCvMat__va_imageP.ColorType"></span><span class="target" id="VisionAppster.OpenCvMat.OpenCvMat"></span><code class="sig-name descname"><span class="pre">OpenCvMat</span></code><span class="sig-paren">(</span><a class="reference internal" href="../../../c/reference/va_image/#_CPPv48va_image" title="va_image"><span class="pre">va_image</span></a> <span class="pre">*</span><em><span class="pre">img</span></em>, <a class="reference internal" href="#_CPPv4N13VisionAppster9OpenCvMat9ColorTypeE" title="VisionAppster::OpenCvMat::ColorType"><span class="pre">ColorType</span></a> <em><span class="pre">colorType</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N13VisionAppster9OpenCvMat9OpenCvMatEP8va_image9ColorType" title="Permalink to this definition">ðŸ”—</a><br /></dt>
<dd><p>Creates a cv::Mat with the specified OpenCV color type. </p>
<p>If the number of color channels in <em>img</em> is not the same as in the target color type, a deep copy of the data in <em>img</em> will be created.</p>
<p>When an <a class="reference internal" href="#VisionAppster::OpenCvMat"><span class="std std-ref">OpenCvMat</span></a> is constructed this way, the temporary copy is automatically copied back to <em>img</em> when the <a class="reference internal" href="#VisionAppster::OpenCvMat"><span class="std std-ref">OpenCvMat</span></a> object goes out of scope. Thus, any modifications made to the temporary image in a function call are propagated to <em>img</em>.</p>
<p><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">using</span> <span class="n">VisionAppster</span><span class="p">::</span><span class="n">OpenCvMat</span><span class="p">;</span>
<span class="o">//</span> <span class="n">floodFill</span> <span class="n">accepts</span> <span class="n">only</span> <span class="mi">3</span><span class="o">-</span> <span class="ow">and</span> <span class="mi">1</span><span class="o">-</span><span class="n">channel</span> <span class="n">images</span><span class="o">.</span>
<span class="o">//</span> <span class="n">Assuming</span> <span class="n">inImg</span> <span class="ow">is</span> <span class="mi">32</span><span class="o">-</span><span class="n">bit</span> <span class="n">RGB</span>
<span class="n">va_image</span><span class="o">*</span> <span class="n">pFilled</span> <span class="o">=</span> <span class="n">va_image_clone</span><span class="p">(</span><span class="n">inImg</span><span class="p">);</span>
<span class="n">cv</span><span class="p">::</span><span class="n">floodFill</span><span class="p">(</span><span class="n">OpenCvMat</span><span class="p">(</span><span class="n">pFilled</span><span class="p">,</span> <span class="n">OpenCvMat</span><span class="p">::</span><span class="n">Rgb24</span><span class="p">),</span>
              <span class="n">cv</span><span class="p">::</span><span class="n">Point</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
              <span class="n">cv</span><span class="p">::</span><span class="n">Scalar</span><span class="p">(</span><span class="mi">127</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">19</span><span class="p">));</span>
<span class="o">//</span> <span class="n">pFilled</span> <span class="n">now</span> <span class="n">contains</span> <span class="n">the</span> <span class="n">result</span> <span class="ow">in</span> <span class="mi">32</span><span class="o">-</span><span class="n">bit</span> <span class="n">RGB</span>
</pre></div>
</div>
 </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-functions">Public Static Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N13VisionAppster9OpenCvMat15isSupportedTypeEi">
<span id="_CPPv3N13VisionAppster9OpenCvMat15isSupportedTypeEi"></span><span id="_CPPv2N13VisionAppster9OpenCvMat15isSupportedTypeEi"></span><span id="VisionAppster::OpenCvMat::isSupportedType__i"></span><span class="target" id="VisionAppster.OpenCvMat.isSupportedType"></span><em class="property"><span class="pre">static</span></em> <span class="pre">bool</span> <code class="sig-name descname"><span class="pre">isSupportedType</span></code><span class="sig-paren">(</span><span class="pre">int</span> <em><span class="pre">type</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N13VisionAppster9OpenCvMat15isSupportedTypeEi" title="Permalink to this definition">ðŸ”—</a><br /></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if <em>type</em> is a supported type ID (<code class="docutils literal notranslate"><a class="reference internal" href="../../../c/reference/va_image/#va_image.type"><span class="std std-ref"><span class="pre">va_image.type</span></span></a></code> or <code class="docutils literal notranslate"><span class="pre">va_matrix.type</span></code>). </p>
</dd></dl>

</div>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../../../js/" class="btn btn-neutral float-right" title="JavaScript client API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../" class="btn btn-neutral float-left" title="OpenCV Integration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, VisionAppster.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-129514554-1', 'auto');
    
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>